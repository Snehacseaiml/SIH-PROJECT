<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title || 'RockGuard AI - Next-Gen Rockfall Prediction' %></title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Enhanced Particle Background -->
    <div id="particles-js"></div>
    
    <!-- Advanced Floating Elements -->
    <div class="floating-elements">
        <div class="floating-element" data-speed="2">
            <div class="element-glow"></div>
        </div>
        <div class="floating-element" data-speed="1.5">
            <div class="element-glow"></div>
        </div>
        <div class="floating-element" data-speed="3">
            <div class="element-glow"></div>
        </div>
        <div class="floating-element" data-speed="2.5">
            <div class="element-glow"></div>
        </div>
        <div class="floating-element" data-speed="1.8">
            <div class="element-glow"></div>
        </div>
        <div class="floating-element" data-speed="2.2">
            <div class="element-glow"></div>
        </div>
    </div>

    <!-- Enhanced Header with Glass Morphism -->
    <header class="glass-header">
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-shield-alt"></i>
                        <div class="logo-glow"></div>
                        <div class="logo-pulse"></div>
                    </div>
                    <span class="logo-text">RockGuard AI</span>
                    <div class="logo-subtitle">Next-Gen Safety</div>
                </a>
                <ul class="nav-links">
                    <li><a href="#features" class="nav-link">
                        <i class="fas fa-star"></i>
                        <span>Features</span>
                    </a></li>
                    <li><a href="#about" class="nav-link">
                        <i class="fas fa-info-circle"></i>
                        <span>About</span>
                    </a></li>
                    <li><a href="#contact" class="nav-link">
                        <i class="fas fa-envelope"></i>
                        <span>Contact</span>
                    </a></li>
                    <% if (typeof user !== 'undefined' && user) { %>
                        <li><a href="/dashboard" class="btn btn-primary glass-btn">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                            <div class="btn-shine"></div>
                        </a></li>
                        <li><a href="/logout" class="btn btn-secondary glass-btn">Logout</a></li>
                    <% } else { %>
                        <li><a href="/login" class="btn btn-primary glass-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Login</span>
                            <div class="btn-shine"></div>
                        </a></li>
                        <li><a href="/signup" class="btn btn-secondary glass-btn">
                            <i class="fas fa-user-plus"></i>
                            <span>Sign Up</span>
                        </a></li>
                    <% } %>
                </ul>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Enhanced Hero Section -->
    <section class="hero">
        <div class="hero-background">
            <div class="hero-gradient"></div>
            <div class="hero-pattern"></div>
            <div class="hero-overlay"></div>
        </div>
        <div class="container">
            <div class="hero-content">
                <!-- Enhanced Badge -->
                <div class="hero-badge">
                    <div class="badge-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <span>AI-Powered Safety Technology</span>
                    <div class="badge-pulse"></div>
                </div>
                
                <!-- Enhanced Title with Typing Effect -->
                <h1 class="hero-title">
                    <span class="title-line typing-text">Next-Generation</span>
                    <span class="title-highlight typing-text-delay">Rockfall Prediction</span>
                    <span class="title-line typing-text-delay-2">System</span>
                </h1>
                
                <!-- Enhanced Description -->
                <p class="hero-description">
                    Revolutionizing mining safety with advanced AI algorithms, real-time monitoring, 
                    and predictive analytics that save lives and protect operations.
                </p>
                
                <!-- Enhanced Interactive Stats -->
                <div class="stats-showcase">
                    <div class="stat-item" data-value="99.8">
                        <div class="stat-circle">
                            <svg class="stat-progress" viewBox="0 0 120 120">
                                <circle class="stat-bg" cx="60" cy="60" r="54"></circle>
                                <circle class="stat-fill" cx="60" cy="60" r="54"></circle>
                            </svg>
                            <div class="stat-content">
                                <div class="stat-number">0</div>
                                <div class="stat-unit">%</div>
                            </div>
                            <div class="stat-glow"></div>
                        </div>
                        <div class="stat-label">Accuracy Rate</div>
                        <div class="stat-description">AI Prediction</div>
                    </div>
                    
                    <div class="stat-item" data-value="24">
                        <div class="stat-circle">
                            <svg class="stat-progress" viewBox="0 0 120 120">
                                <circle class="stat-bg" cx="60" cy="60" r="54"></circle>
                                <circle class="stat-fill" cx="60" cy="60" r="54"></circle>
                            </svg>
                            <div class="stat-content">
                                <div class="stat-number">0</div>
                                <div class="stat-unit">/7</div>
                            </div>
                            <div class="stat-glow"></div>
                        </div>
                        <div class="stat-label">Monitoring</div>
                        <div class="stat-description">24/7 Coverage</div>
                    </div>
                    
                    <div class="stat-item" data-value="100">
                        <div class="stat-circle">
                            <svg class="stat-progress" viewBox="0 0 120 120">
                                <circle class="stat-bg" cx="60" cy="60" r="54"></circle>
                                <circle class="stat-fill" cx="60" cy="60" r="54"></circle>
                            </svg>
                            <div class="stat-content">
                                <div class="stat-number">0</div>
                                <div class="stat-unit">%</div>
                            </div>
                            <div class="stat-glow"></div>
                        </div>
                        <div class="stat-label">Real-time</div>
                        <div class="stat-description">Instant Alerts</div>
                    </div>
                </div>

                <!-- Enhanced Live Monitoring Dashboard -->
                <div class="live-dashboard">
                    <div class="dashboard-header">
                        <div class="status-indicator">
                            <div class="status-dot"></div>
                            <span>Live Monitoring Active</span>
                            <div class="status-pulse"></div>
                        </div>
                        <div class="dashboard-time" id="live-time"></div>
                    </div>
                    <div class="dashboard-grid">
                        <div class="dashboard-card risk-card">
                            <div class="card-header">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Risk Level</span>
                                <div class="card-glow"></div>
                            </div>
                            <div class="card-content">
                                <div class="risk-meter">
                                    <div class="risk-needle"></div>
                                    <div class="risk-zones">
                                        <span class="zone low">Low</span>
                                        <span class="zone medium">Medium</span>
                                        <span class="zone high">High</span>
                                    </div>
                                    <div class="risk-indicator-text">Current: Medium</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card sensor-card">
                            <div class="card-header">
                                <i class="fas fa-satellite-dish"></i>
                                <span>Active Sensors</span>
                                <div class="card-glow"></div>
                            </div>
                            <div class="card-content">
                                <div class="sensor-grid">
                                    <div class="sensor active" data-sensor="1"></div>
                                    <div class="sensor active" data-sensor="2"></div>
                                    <div class="sensor active" data-sensor="3"></div>
                                    <div class="sensor active" data-sensor="4"></div>
                                    <div class="sensor active" data-sensor="5"></div>
                                    <div class="sensor active" data-sensor="6"></div>
                                </div>
                                <div class="sensor-status">All sensors operational</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced CTA Buttons -->
                <div class="cta-section">
                    <% if (typeof user !== 'undefined' && user) { %>
                        <a href="/dashboard" class="btn btn-primary btn-hero">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Go to Dashboard</span>
                            <div class="btn-glow"></div>
                            <div class="btn-particles"></div>
                        </a>
                    <% } else { %>
                        <a href="/signup" class="btn btn-primary btn-hero">
                            <i class="fas fa-rocket"></i>
                            <span>Start Free Trial</span>
                            <div class="btn-glow"></div>
                            <div class="btn-particles"></div>
                        </a>
                    <% } %>
                    <a href="#demo" class="btn btn-secondary btn-hero">
                        <i class="fas fa-play"></i>
                        <span>Watch Demo</span>
                        <div class="btn-shine"></div>
                    </a>
                </div>

                <!-- Scroll Indicator -->
                <div class="scroll-indicator">
                    <div class="scroll-arrow">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <span>Scroll to explore</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Features Section -->
    <section id="features" class="features">
        <div class="container">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-star"></i>
                    <span>Features</span>
                </div>
                <h2>Cutting-Edge Technology</h2>
                <p>Discover the advanced capabilities that make RockGuard AI the industry leader in rockfall prediction</p>
            </div>
            
            <div class="features-showcase">
                <div class="feature-card glass-card" data-aos="fade-up">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                        <div class="icon-glow"></div>
                        <div class="icon-pulse"></div>
                    </div>
                    <h3>AI-Powered Analysis</h3>
                    <p>Advanced machine learning models process multi-source data including DEM, drone imagery, and sensor data for accurate predictions.</p>
                    <div class="feature-highlight">
                        <span>99.8% Accuracy</span>
                    </div>
                    <div class="feature-glow"></div>
                </div>
                
                <div class="feature-card glass-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="feature-icon">
                        <i class="fas fa-bell"></i>
                        <div class="icon-glow"></div>
                        <div class="icon-pulse"></div>
                    </div>
                    <h3>Real-time Alerts</h3>
                    <p>Instant SMS and email notifications with suggested action plans when potential rockfall risks are detected.</p>
                    <div class="feature-highlight">
                        <span>< 30s Response</span>
                    </div>
                    <div class="feature-glow"></div>
                </div>
                
                <div class="feature-card glass-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                        <div class="icon-glow"></div>
                        <div class="icon-pulse"></div>
                    </div>
                    <h3>Risk Visualization</h3>
                    <p>Interactive dashboard with real-time risk maps and probability-based forecasts for informed decision-making.</p>
                    <div class="feature-highlight">
                        <span>3D Mapping</span>
                    </div>
                    <div class="feature-glow"></div>
                </div>
                
                <div class="feature-card glass-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                        <div class="icon-glow"></div>
                        <div class="icon-pulse"></div>
                    </div>
                    <h3>Mobile Access</h3>
                    <p>Access critical monitoring data and alerts on any device with our responsive web and mobile applications.</p>
                    <div class="feature-highlight">
                        <span>Cross-Platform</span>
                    </div>
                    <div class="feature-glow"></div>
                </div>
                
                <div class="feature-card glass-card" data-aos="fade-up" data-aos-delay="400">
                    <div class="feature-icon">
                        <i class="fas fa-cogs"></i>
                        <div class="icon-glow"></div>
                        <div class="icon-pulse"></div>
                    </div>
                    <h3>Easy Integration</h3>
                    <p>Seamless integration with existing monitoring hardware and open-source compatibility for customization.</p>
                    <div class="feature-highlight">
                        <span>Plug & Play</span>
                    </div>
                    <div class="feature-glow"></div>
                </div>
                
                <div class="feature-card glass-card" data-aos="fade-up" data-aos-delay="500">
                    <div class="feature-icon">
                        <i class="fas fa-dollar-sign"></i>
                        <div class="icon-glow"></div>
                        <div class="icon-pulse"></div>
                    </div>
                    <h3>Cost-Effective</h3>
                    <p>Affordable solution that scales for different mine sites, reducing operational costs and improving safety.</p>
                    <div class="feature-highlight">
                        <span>ROI 300%</span>
                    </div>
                    <div class="feature-glow"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <div class="section-badge">
                        <i class="fas fa-info-circle"></i>
                        <span>About Us</span>
                    </div>
                    <h2>Protecting the Future of Mining</h2>
                    <p>RockGuard AI is a cutting-edge rockfall prediction system designed specifically for open-pit mining operations. Our AI-powered platform combines advanced machine learning algorithms with real-time monitoring to provide early warning systems that save lives and protect equipment.</p>
                    
                    <div class="achievement-grid">
                        <div class="achievement-item">
                            <div class="achievement-number" data-target="500">0</div>
                            <div class="achievement-label">Mines Protected</div>
                            <div class="achievement-glow"></div>
                        </div>
                        <div class="achievement-item">
                            <div class="achievement-number" data-target="10000">0</div>
                            <div class="achievement-label">Lives Saved</div>
                            <div class="achievement-glow"></div>
                        </div>
                        <div class="achievement-item">
                            <div class="achievement-number" data-target="50">0</div>
                            <div class="achievement-label">Million $ Saved</div>
                            <div class="achievement-glow"></div>
                        </div>
                    </div>
                </div>
                
                <div class="about-visual">
                    <div class="tech-stack">
                        <div class="tech-item">
                            <i class="fas fa-robot"></i>
                            <span>AI/ML</span>
                            <div class="tech-glow"></div>
                        </div>
                        <div class="tech-item">
                            <i class="fas fa-cloud"></i>
                            <span>Cloud</span>
                            <div class="tech-glow"></div>
                        </div>
                        <div class="tech-item">
                            <i class="fas fa-satellite"></i>
                            <span>IoT</span>
                            <div class="tech-glow"></div>
                        </div>
                        <div class="tech-item">
                            <i class="fas fa-chart-bar"></i>
                            <span>Analytics</span>
                            <div class="tech-glow"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Footer -->
    <footer id="contact" class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <div class="logo-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <span>RockGuard AI</span>
                    </div>
                    <p>Protecting mining operations with intelligent rockfall prediction technology.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#about">About</a></li>
                        <% if (typeof user !== 'undefined' && user) { %>
                            <li><a href="/dashboard">Dashboard</a></li>
                            <li><a href="/logout">Logout</a></li>
                        <% } else { %>
                            <li><a href="/login">Login</a></li>
                            <li><a href="/signup">Sign Up</a></li>
                        <% } %>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>info@rockguardai.com</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+1 (555) 123-4567</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Mining Tech District</span>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <%= new Date().getFullYear() %> RockGuard AI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Enhanced Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Enhanced Particle.js Configuration
        particlesJS('particles-js', {
            particles: {
                number: { value: 100, density: { enable: true, value_area: 800 } },
                color: { value: ['#3b82f6', '#0ea5e9', '#06b6d4'] },
                shape: { 
                    type: ['circle', 'triangle'],
                    stroke: { width: 0, color: '#000000' }
                },
                opacity: { 
                    value: 0.6, 
                    random: true,
                    anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false }
                },
                size: { 
                    value: 4, 
                    random: true,
                    anim: { enable: true, speed: 2, size_min: 0.1, sync: false }
                },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: '#3b82f6',
                    opacity: 0.4,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 3,
                    direction: 'none',
                    random: true,
                    straight: false,
                    out_mode: 'out',
                    bounce: false,
                    attract: { enable: true, rotateX: 600, rotateY: 1200 }
                }
            },
            interactivity: {
                detect_on: 'canvas',
                events: {
                    onhover: { enable: true, mode: 'repulse' },
                    onclick: { enable: true, mode: 'push' },
                    resize: true
                },
                modes: {
                    repulse: { distance: 100, duration: 0.4 },
                    push: { particles_nb: 4 }
                }
            },
            retina_detect: true
        });

        // Enhanced Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Enhanced Navbar scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Enhanced Animated stats with progress circles
        function animateStats() {
            const stats = document.querySelectorAll('.stat-item');
            stats.forEach(stat => {
                const number = stat.querySelector('.stat-number');
                const progressCircle = stat.querySelector('.stat-fill');
                const target = parseInt(stat.dataset.value);
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;
                
                // Animate progress circle
                const circumference = 2 * Math.PI * 54;
                const progress = (target / 100) * circumference;
                progressCircle.style.strokeDasharray = circumference;
                progressCircle.style.strokeDashoffset = circumference;
                
                setTimeout(() => {
                    progressCircle.style.strokeDashoffset = circumference - progress;
                }, 500);
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    number.textContent = Math.floor(current);
                }, 16);
            });
        }

        // Enhanced Achievement counters
        function animateAchievements() {
            const achievements = document.querySelectorAll('.achievement-number');
            achievements.forEach(achievement => {
                const target = parseInt(achievement.dataset.target);
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    achievement.textContent = Math.floor(current);
                }, 16);
            });
        }

        // Enhanced Live time with better formatting
        function updateTime() {
            const timeElement = document.getElementById('live-time');
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            timeElement.textContent = timeString;
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Enhanced Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    if (entry.target.classList.contains('stats-showcase')) {
                        animateStats();
                    }
                    if (entry.target.classList.contains('achievement-grid')) {
                        animateAchievements();
                    }
                    entry.target.classList.add('animate');
                }
            });
        }, observerOptions);

        // Observe elements
        document.querySelectorAll('.stats-showcase, .achievement-grid, .feature-card').forEach(el => {
            observer.observe(el);
        });

        // Enhanced Floating elements parallax
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallax = document.querySelectorAll('.floating-element');
            
            parallax.forEach(element => {
                const speed = element.dataset.speed;
                element.style.transform = `translateY(${scrolled * speed}px) rotate(${scrolled * 0.1}deg)`;
            });
        });

        // Enhanced Mobile menu toggle
        document.querySelector('.mobile-menu-toggle').addEventListener('click', function() {
            this.classList.toggle('active');
            document.querySelector('.nav-links').classList.toggle('active');
        });

        // Enhanced Sensor animations
        function animateSensors() {
            const sensors = document.querySelectorAll('.sensor');
            sensors.forEach((sensor, index) => {
                setTimeout(() => {
                    sensor.classList.add('pulse');
                    setTimeout(() => {
                        sensor.classList.remove('pulse');
                    }, 1000);
                }, index * 200);
            });
        }
        
        setInterval(animateSensors, 3000);

        // Enhanced Notifications
        <% if (typeof messages !== 'undefined' && messages.success_msg && messages.success_msg.length > 0) { %>
            showNotification('<%= messages.success_msg[0] %>', 'success');
        <% } %>
        
        <% if (typeof messages !== 'undefined' && messages.error_msg && messages.error_msg.length > 0) { %>
            showNotification('<%= messages.error_msg[0] %>', 'error');
        <% } %>

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // Enhanced Typing effect for hero title
        function typeWriter(element, text, speed = 100) {
            let i = 0;
            element.innerHTML = '';
            
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // Initialize typing effects
        document.addEventListener('DOMContentLoaded', function() {
            const typingElements = document.querySelectorAll('.typing-text');
            typingElements.forEach((element, index) => {
                const text = element.textContent;
                setTimeout(() => {
                    typeWriter(element, text, 80);
                }, index * 1000);
            });
        });

        // Enhanced Button hover effects
        document.querySelectorAll('.btn-hero').forEach(btn => {
            btn.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px) scale(1.05)';
            });
            
            btn.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Enhanced Scroll indicator
        document.querySelector('.scroll-indicator').addEventListener('click', function() {
            document.querySelector('#features').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>

